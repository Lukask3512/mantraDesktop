<header *ngIf="this.route">
  <div *ngIf="this.route.takenBy == getDispecerId()" class="input">
    <h4>
      Ponuka priradená za <h5>{{this.route.price}}</h5>
    </h4>
    <div *ngIf="!isCancel()">
      <h2 *ngIf="this.route.cancelByDriver">Zrusenie prepravy musi potvrdit zadavatel.</h2>
      <h2 *ngIf="this.route.cancelByCreator">Zadavatel chce zrusit ponuku. Chcete potvrdit zrusenie?</h2>
      <button *ngIf="this.route.ponuknuteTo != '' && !this.route.cancelByDriver ; else elseCancel" (click)="tryCancelOffer()">Zrusit ponuku</button>
      <ng-template #elseCancel>
        <button (click)="tryCancelOfferCancel()">Zrusit</button>
      </ng-template>
    </div>
    <h2 *ngIf="isCancel()">Ponuka bola zrusena!!</h2>

  </div>
</header>
<button (click)="openAllDetailDialog()">Detail</button>
<div  class="wrapper">
    <app-drag-and-drop-list #dropList
                            [address]="this.address"
                            [draggable]="false">

    </app-drag-and-drop-list>
<div *ngIf="this.route" class="wrapper">

<!--  </ol>-->
<!--  <div>-->
    <app-offer-to-route  (routeToMap)="changeRouteOnMap($event)" [offerAddresses]="this.address" [offer]="this.route"
                        *ngIf="this.route.takenBy == getDispecerId() && !isCancel() && this.route.offerInRoute == ''"></app-offer-to-route>

  <h2  *ngIf="this.route.takenBy == getDispecerId() && this.route.offerInRoute != ''">
    Ponuka priradená vo vozidle: <button (click)="sendCar(this.getCarById())" routerLink="/view/cars/detail">{{this.getCarById().ecv}}</button>
  </h2>


  <div *ngIf="!createdBy() && !isCancel() && this.route.takenBy !== getDispecerId()" class="input">
    <h4 *ngIf="this.offer">
      Vaša ponuka {{this.offer}}
    </h4>
    <h4 *ngIf="this.route.price != 0">Cena: {{this.route.price}}</h4>
    <button *ngIf="this.offer == 0 && this.route.ponuknuteTo !== getDispecerId()" (click)="this.deleteMyPriceOffer()">Zrusit ponuku</button>
    <button *ngIf="this.offer && this.route.ponuknuteTo !== getDispecerId()" (click)="this.deleteMyPriceOffer()">Zrusit ponuku</button>

    <mat-form-field *ngIf="this.route.ponuknuteTo !== getDispecerId() && this.route.price == 0" appearance="standard" class="sizeInput">
      <mat-label>Ponuknite cenu</mat-label>
      <input type="number" matInput placeholder="Cena...."  [(ngModel)]="price">
      <span matSuffix> € </span>
      <mat-hint>V eurách</mat-hint>
    </mat-form-field>

<!--    <h3 *ngIf="this.route.takenBy == '' && this.price > 0">{{this.route.price}}</h3>-->

    <button *ngIf="this.route.ponuknuteTo !== getDispecerId() && this.offer != 0 && !this.offer; else elseUpravitCenu" (click)="addPrice()">Pridat ponuku</button>
    <ng-template #elseUpravitCenu>
      <button  (click)="addPrice()">Upravit cenu</button>
    </ng-template>
    <h2 *ngIf="this.route.ponuknuteTo == getDispecerId()" >Finálne prijatie prepravy</h2>
    <button *ngIf="this.route.ponuknuteTo == getDispecerId()" (click)="confirm()">Prijat prepravu</button>
    <button *ngIf="this.route.ponuknuteTo == getDispecerId()" (click)="cancelOffer()">Odmietnut prepravu</button>
  </div>

  <div *ngIf="createdBy() && !isCancel() && this.route.takenBy === ''" class="input">
    <h4 *ngIf="this.route.price != 0">Cena: {{this.route.price}}</h4>
    <button (click)="upravCenuPonuky()" [disabled]="this.route.offerFrom.length > 0">Upravit ponuku</button>
    <h4>
      Ponuky
    </h4>
    <div class="oneOffer" *ngFor="let offer of this.route.offerFrom; index as i">
      <app-get-info-about-company [masterId]="offer"></app-get-info-about-company>
<!--      <h5>{{}}</h5>-->
      <h4 *ngIf="this.route.price == 0">{{this.route.priceFrom[i]}}</h4>
      <button *ngIf="this.route.ponuknuteTo == '' " (click)="chooseCompany(this.route.offerFrom[i])">Potvrdit</button>
    </div>

    <button *ngIf="this.route.ponuknuteTo != ''" (click)="cancelOffer()">Zrusit ponuku</button>


  </div>

  <div *ngIf="createdBy() && this.route.takenBy !== ''" class="input">
    <h4>
      Ponuku prijala firma:
      <app-get-info-about-company [masterId]="this.route.takenBy"></app-get-info-about-company>
      za {{this.route.price}}
    </h4>
    <div *ngIf="!isCancel()">
      <h2 *ngIf="this.route.cancelByDriver">Prepravca chce zrusit ponuku. Chcete potvrdit zrusenie?</h2>
      <h2 *ngIf="this.route.cancelByCreator">Zrusenie prepravy musi potvrdit zadavatel.</h2>
      <button (click)="tryCancelOffer()">Zrusit ponuku</button>
      <ng-template #elseCancelCompany>
        <button (click)="tryCancelOfferCancel()">Zrusit</button>
      </ng-template>
    </div>
    <h2 *ngIf="isCancel()">Ponuka bola zrusena!</h2>

  </div>


</div>
  <div class="map">
    <app-openlayer #child></app-openlayer>
  </div>

  <footer>
    <button (click)="openLog()">Log prepravy </button>
  </footer>
</div>
