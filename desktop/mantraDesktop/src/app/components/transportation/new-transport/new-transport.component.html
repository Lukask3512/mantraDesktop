<header>
  <h1 *ngIf="this.car != undefined" >{{this.car.ecv}}</h1>
  <p *ngIf="route != undefined  && route.estimatedTimeArrival && !route.finished">
    Približný čas dorazenia do navigovaného miesta: {{estimatedTimeToLocal(this.route.estimatedTimeArrival)}}
  </p>
</header>

<div class="allWrapper">
<!--  <app-find-car-by-id [carId]="this.carId"></app-find-car-by-id>-->
<div class="wrapper">




<app-adresses #childGoogle *ngIf="checkFinished()"  (placeName)="getAdress($event)"
              (placeLat)="getLat($event)"
              (placeLon)="getLon($event)">
</app-adresses>

<div>
  <section class="example-section">
    <mat-radio-group (change)="labelChange()" class="radioButtons" [(ngModel)]="labelPosition">
      <mat-radio-button class="radios" value="nakladka">Nakládka</mat-radio-button>
      <mat-radio-button class="radios" value="vykladka">Vykládka</mat-radio-button>
    </mat-radio-group>
  </section>

  <h4>Možný dátum príjazdu</h4>
  <mat-radio-group [(ngModel)]="datumPrichodu">
    <mat-radio-button class="example-margin" value="nerozhoduje">Nerozhoduje</mat-radio-button>
    <mat-radio-button class="example-margin" value="rozhoduje">Rozhoduje</mat-radio-button>
  </mat-radio-group>

  <mat-form-field appearance="fill" *ngIf="datumPrichodu == 'rozhoduje'">
    <mat-label>Enter a date range</mat-label>
    <mat-date-range-input [formGroup]="dateRange" [rangePicker]="picker" [min]="minDate">
      <input (change)="date()" formControlName="startDate" matStartDate placeholder="Start date">
      <input formControlName="endDate" matEndDate placeholder="End date">
    </mat-date-range-input>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>
  </mat-form-field>

  <h4>Možný čas príjazdu</h4>

  <mat-radio-group [(ngModel)]="casPrichodu">
    <mat-radio-button class="example-margin" value="nerozhoduje">Nerozhoduje</mat-radio-button>
    <mat-radio-button class="example-margin" value="rozhoduje">Rozhoduje</mat-radio-button>
  </mat-radio-group>

  <div [formGroup]="dateRange" *ngIf="casPrichodu == 'rozhoduje'">
    <mat-form-field  class="sizeInput">
      <mat-label>Časové okno od</mat-label>
      <input formControlName="timeFrom" matInput type="time">
    </mat-form-field>

    <mat-form-field class="sizeInput">
      <mat-label>Časové okno do</mat-label>
      <input matInput type="time" formControlName="timeTo">
    </mat-form-field>
  </div>


  <h4>Počet kusov</h4>
  <mat-form-field appearance="standard" >
    <mat-label>Počet kusov</mat-label>
    <input (change)="sizeUpdate()" [(ngModel)]="numberOfItems" min="1" type="number" matInput placeholder="Počet....">
    <span matSuffix> ks </span>
    <mat-hint>Počet</mat-hint>
  </mat-form-field>

  <p>Parametre {{actualItemInForm + 1}} z {{numberOfItems}}</p>

<div class="formAndBedna">

  <form class="detailFormular" [formGroup]="transportForm">
  <div class="size">
    <mat-form-field appearance="standard" class="sizeInput">
      <mat-label>Šírka</mat-label>
      <input formControlName="sizeS" type="number" step="0.1" matInput placeholder="Šírka....">
      <span matSuffix> m </span>
      <mat-hint>V metroch</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="standard" class="sizeInput">
      <mat-label>Výška</mat-label>
      <input formControlName="sizeV" type="number" step="0.1" matInput placeholder="Výška....">
      <span matSuffix> m </span>
      <mat-hint>V metroch</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="standard" class="sizeInput">
      <mat-label>Dĺžka</mat-label>
      <input formControlName="sizeD" type="number" step="0.1" matInput placeholder="Dĺžka....">
      <span matSuffix> m </span>
      <mat-hint>V metroch</mat-hint>
    </mat-form-field>

    <h4>Váha</h4>

    <mat-form-field appearance="standard" class="sizeInput">
      <mat-label>Váha</mat-label>
      <input type="number" formControlName="weight" step="0.1" matInput placeholder="Váha....">
      <span matSuffix> t </span>
      <mat-hint>V tonách</mat-hint>
    </mat-form-field>

    <h4>Poloha nakladania</h4>

    <mat-radio-group formControlName="poziciaNakladania">
      <mat-radio-button (change)="updateFormPosition()" class="example-margin" value="nerozhoduje">Nerozhoduje</mat-radio-button>
      <mat-radio-button (change)="updateFormPosition()" class="example-margin" value="rozhoduje">Rozhoduje</mat-radio-button>
    </mat-radio-group>

    <div  *ngIf="this.transportForm.get('poziciaNakladania').value == 'rozhoduje'">
      <mat-checkbox (change)="updateMatLabelForm()" formControlName="fromBackSide">Zo zadu</mat-checkbox>
      <mat-checkbox (change)="updateMatLabelForm()" formControlName="fromSide">Z boku</mat-checkbox>
      <mat-checkbox (change)="updateMatLabelForm()" formControlName="fromUpSide">Z vrchu</mat-checkbox>
    </div>

    <h4>Požadovaná výška nakladacej hrany</h4>

    <mat-radio-group formControlName="vyskaHrany">
      <mat-radio-button (change)="updateValidFormHrana()"  class="example-margin" value="nerozhoduje">Nerozhoduje</mat-radio-button>
      <mat-radio-button (change)="updateValidFormHrana()"  class="example-margin" value="rozhoduje">Rozhoduje</mat-radio-button>
    </mat-radio-group>

    <mat-form-field *ngIf="this.transportForm.get('vyskaHrany').value == 'rozhoduje'" appearance="standard" class="sizeInput">
      <mat-label>Výška nak. hrany</mat-label>
      <input type="number"  min="0" step="0.1" formControlName="vyskaHranySize" matInput placeholder="Výška....">
      <span matSuffix> m </span>
      <mat-hint>V metroch</mat-hint>
    </mat-form-field>

    <h4>Stohovateľnosť</h4>

    <mat-radio-group formControlName="stohovatelnost">
      <mat-radio-button (change)="updateFormStoho()"  class="example-margin" value="nie">Nie</mat-radio-button>
      <mat-radio-button (change)="updateFormStoho()"  class="example-margin" value="ano">Áno</mat-radio-button>
    </mat-radio-group>

    <mat-form-field *ngIf="this.transportForm.get('stohovatelnost').value == 'ano'" appearance="standard" class="sizeInput">
      <mat-label>Max. nosnost</mat-label>
      <input type="number"  min="0" step="0.1" formControlName="stohoSize" matInput placeholder="Výška....">
      <span matSuffix> kg </span>
      <mat-hint>V kilogramoch</mat-hint>
    </mat-form-field>

<!--    <mat-checkbox>Chlad</mat-checkbox>-->



    <button [disabled]="this.checkIfCanSKipToPrevious()" (click)="previousItem()">Späť</button>
  <button [disabled]="this.checkIfCanSKipToNext()" (click)="nextItem()">Ďalej</button>

  </div>

  </form>
  <div>
  <h4 *ngIf="labelPosition == 'vykladka'">Tu vyber</h4>
  <div class="bednaWapper" *ngFor="let detail of this.arrayOfDetailsAbRoute; let indexik = index">
    <div class="nakladkaWrapper" *ngIf="this.route.type[indexik] == 'nakladka'" >
      <div class="bednaWapperNakl" *ngFor="let bedna of detail.sizeS ; let indexBedne = index">
        <img (click)="setForm(indexik, indexBedne)" class="bedna" src="./assets/logo/cube.png">
      </div>
    </div>

    <div class="vykladkaWrapper" *ngIf="this.route.type[indexik] == 'vykladka'">
      <div class="bednaWapperVykl" *ngFor="let bedna of detail.sizeS ; let indexBedne = index">
        <img (click)="setForm(indexik, indexBedne)" class="bedna" src="./assets/logo/cube.png">
      </div>
    </div>

  </div>
  </div>

</div>

  <input class="form-control" placeholder="Pridaj poznámku..." type="text" [(ngModel)]="infoAboutRoute">

  <div class="addButton">
    <button class="buttonG" [disabled]="this.checkIfCanAddNextAdress()" (click)="add()">Pridať +</button>
    <button class="buttonG" [disabled]="!clickedOnIndexDetail" (click)="updateArrayOfDetail()">Upraviť</button>
  </div>


  </div>






</div>

  <div class="addresses">
    <app-drag-and-drop-list #dropList (clickedOnRoute)="updateDetailOnTown($event)"
                            [route]="this.route"
                            [draggable]="true"
                            (outputRoute)="onDropListChange($event)"
                            >

    </app-drag-and-drop-list>
    <div class="changeButtons" *ngIf="checkFinished()" >
      <button class="buttonDriver" *ngIf="carId != null" [disabled]="!change" (click)="this.updateDetails()">Odoslať vodičovi</button>
      <button class="buttonTransport"  *ngIf="carId == null && this.route != undefined" [disabled]="this.route.nameOfTowns.length <= 0 || this.route.nameOfTowns == null" (click)="openAddDialog()">Vybrať vozidlo</button>
      <button class="buttonTransport"  *ngIf="carId == null" [disabled]="this.route.nameOfTowns.length <= 0 || this.route.nameOfTowns == null" (click)="openOfferDialog()">Poúktnuť spoločnostiam</button>
      <button class="buttonChange"  *ngIf="carId != null" (click)="openAddDialogChangeCar()">Zmeň vozidlo</button>
    </div>
  </div>
  <div class="map">
    <app-openlayer #child></app-openlayer>
  </div>

</div>
<app-route-log *ngIf="route != undefined" [routeId]="parentSubject"></app-route-log>

