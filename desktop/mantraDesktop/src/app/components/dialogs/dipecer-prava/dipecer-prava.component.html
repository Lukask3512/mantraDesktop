<div >
  <div class="headerWrapper">
    <h1 class="header">{{'DISPATCHER.dispatcher' | translate}}</h1>
    <button (click)="close()" class="closeButton">X</button>
  </div>


    <mat-vertical-stepper #stepper>

      <mat-step>
        <ng-template matStepLabel>{{'DISPATCHER.udajeODisp' | translate}}</ng-template>
        <form class="wrap" [formGroup]="dispecerForm">

          <div class="inputWrapper">
          <mat-form-field appearance="standard" class="gridItem">
            <mat-label>{{'DISPATCHER.name' | translate}}</mat-label>
            <input matInput type="text" formControlName="firstName" placeholder="{{'DISPATCHER.name' | translate}}...">
            <mat-hint>{{'DISPATCHER.name' | translate}}</mat-hint>
          </mat-form-field>


          <mat-form-field appearance="standard" class="gridItem">
            <mat-label>{{'DISPATCHER.surname' | translate}}</mat-label>
            <input matInput type="text" formControlName="lastName" placeholder="{{'DISPATCHER.surname' | translate}}...">
            <mat-hint>{{'DISPATCHER.surname' | translate}}</mat-hint>
          </mat-form-field>


          <mat-form-field appearance="standard" class="gridItem">
            <mat-label>{{'DISPATCHER.email' | translate}}</mat-label>
            <input matInput type="text" formControlName="email" placeholder="{{'DISPATCHER.email' | translate}}...">
            <mat-error *ngIf="dispecerForm.invalid">{{getErrorMessage()}}</mat-error>
            <mat-hint>{{'DISPATCHER.email' | translate}}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="standard" class="gridItem">
            <mat-label>{{'DISPATCHER.phoneNumber' | translate}}</mat-label>
            <input matInput type="text" formControlName="phoneNumber" placeholder="{{'DISPATCHER.phoneNumber' | translate}}...">
            <mat-hint>{{'DISPATCHER.phoneNumber' | translate}}</mat-hint>
          </mat-form-field>

          </div>

        </form>
      </mat-step>

      <mat-step>
        <ng-template matStepLabel>{{'DISPATCHER.pristupKuVozidlam' | translate}}</ng-template>
        <div class="carsWrapper">
          <mat-checkbox [(ngModel)]="allCars">{{'DISPATCHER.pristupKuVsetkymVozidlam' | translate}}</mat-checkbox>
          <table mat-table [dataSource]="cars">
            <!-- Position Column -->
            <ng-container matColumnDef="ecv">
              <th mat-header-cell *matHeaderCellDef> {{'CAR.ecv' | translate}} </th>
              <td mat-cell *matCellDef="let element"> {{element.ecv}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="prava">
              <th mat-header-cell *matHeaderCellDef> {{'CAR.pravaPreVodica' | translate}} </th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox [disabled]="allCars" (change)="catchChange(element.id)" [checked]="checkBox(element.id)"></mat-checkbox>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-step>


      <mat-step>
        <ng-template matStepLabel> {{'DISPATCHER.pristupKuPrivesom' | translate}}</ng-template>
        <div class="carsWrapper">
          <mat-checkbox [(ngModel)]="allPrives">{{'DISPATCHER.pristupKuVsetkymPrivesom' | translate}}</mat-checkbox>
          <table mat-table [dataSource]="prives">
            <!-- Position Column -->
            <ng-container matColumnDef="ecv">
              <th mat-header-cell *matHeaderCellDef> {{'CAR.ecv' | translate}} </th>
              <td mat-cell *matCellDef="let element"> {{element.ecv}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="prava">
              <th mat-header-cell *matHeaderCellDef> {{'CAR.pravaPreVodica' | translate}} </th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox [disabled]="allPrives" (change)="catchChangePrives(element.id)" [checked]="checkBoxPrives(element.id)"></mat-checkbox>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-step>

    </mat-vertical-stepper>

  <button [disabled]="!dispecerForm.valid" type="submit" class="buttonG" (click)="updateDispecer()">{{'OFTEN.potvrdit' | translate}}</button>
</div>
